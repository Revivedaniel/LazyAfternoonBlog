const userButtonsEl=document.querySelector("#userButtons"),updateButtonEl=document.querySelector("#updateButton"),deleteButtonEl=document.querySelector("#deleteButton"),saveButtonEl=document.querySelector("#saveButton"),cancelButtonEl=document.querySelector("#cancelButton"),confirmButtonEl=document.querySelector("#confirmButton"),deleteConfirmationEl=document.querySelector("#deleteConfirmation"),titleValue=document.querySelector(".title").innerText,postValue=document.querySelector(".post-body").children[0].innerText,postHeader=document.querySelector(".post-header"),postBody=document.querySelector(".post-Body");updateButtonEl.addEventListener("click",()=>{updateButtonEl.classList.add("hidden"),deleteButtonEl.classList.add("hidden"),saveButtonEl.classList.remove("hidden"),cancelButtonEl.classList.remove("hidden");const a=document.createElement("input"),b=document.createElement("textarea");a.setAttribute("id","newTitle"),b.setAttribute("id","updatePostText"),a.value=titleValue,b.value=postValue,b.setAttribute("maxLength","5000"),b.setAttribute("onfocus","this.style.height = \"\";this.style.height = this.scrollHeight + \"px\""),b.style.maxHeight="100%",a.classList.add("title"),postHeader.children[0].classList.add("hidden"),postHeader.children[1].classList.add("hidden"),postBody.children[0].classList.add("hidden"),postHeader.appendChild(a),postBody.appendChild(b)}),saveButtonEl.addEventListener("click",async a=>{a.preventDefault();const b=document.querySelector("#newTitle").value,c=document.querySelector("#updatePostText").value;if(b&&c){const d=await fetch(`/api/posts/${a.target.dataset.postid}`,{method:"PUT",body:JSON.stringify({title:b,post:c}),headers:{"Content-Type":"application/json"}});d.ok?window.location.reload():alert(d.statusText)}}),cancelButtonEl.addEventListener("click",a=>{a.preventDefault(),window.location.reload()}),deleteButtonEl.addEventListener("click",a=>{a.preventDefault(),deleteConfirmationEl.classList.remove("hidden"),confirmButtonEl.classList.remove("hidden"),cancelButtonEl.classList.remove("hidden"),updateButtonEl.classList.add("hidden"),deleteButtonEl.classList.add("hidden")}),confirmButtonEl.addEventListener("click",async a=>{a.preventDefault();const b=await fetch(`/api/posts/${confirmButtonEl.dataset.postid}`,{method:"DELETE",body:"",headers:{"Content-Type":"application/json"}});b.ok?window.location.replace("/"):alert(b.statusText)});